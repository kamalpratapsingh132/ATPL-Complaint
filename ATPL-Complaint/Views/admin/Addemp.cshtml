@model ATPL_Complaint.Models.emp
@{
    Layout = "~/Views/Shared/admin_layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <title>Add-Employee</title>
    <meta name="viewport" content="width=device-width" />
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/javascript.js"></script>
    <script src="~/js/jquery-3.5.1.min.js"></script>
    @*<link href="~/css/bootstrap.css" rel="stylesheet" />*@
    <link href="~/css/style.css" rel="stylesheet" />

    <style>
        .change{
            width:100%
        }
    </style>
</head>
<body>
    <div class="col-lg-12 main-body">
        @using (Html.BeginForm("Addemp", "admin", FormMethod.Post, new { enctype = "multipart/formdata" }))
        {
        <div class="row">
            <div class="col-md-12"><h3 style="color: #0b4077;font-size: xx-large">ADD EMPLOYEE</h3></div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.emp_id, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.emp_id, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.TextBoxFor(Model => Model.emp_id, new { @class = "form-control change" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.emp_name, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.emp_name, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.TextBoxFor(Model => Model.emp_name, new { @class = "form-control change" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.contact_no, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.contact_no, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.TextBoxFor(Model => Model.contact_no, new { @class = "form-control change", @maxlength = "11" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.email_id, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.email_id, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.TextBoxFor(Model => Model.email_id, new { @class = "form-control change" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.address, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.address, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.TextBoxFor(Model => Model.address, new { @class = "form-control change" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.state, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.state, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.DropDownListFor(model => model.state, ViewBag.StateList as IEnumerable<SelectListItem>, "Select State", new { @class = "form-control" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.city, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.city, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.DropDownListFor(model => model.city, new SelectList(string.Empty, "Value", "Text"), "Select City", new { @class = "form-control" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.pincode, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.pincode, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.TextBoxFor(Model => Model.pincode, new { @class = "form-control change", @maxlength = "6" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.desigination, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.desigination, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.DropDownListFor(model => model.desigination, (List<SelectListItem>)ViewBag.CategoryList, "Select Designation", new { @class = "form-control" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="col-mg-3">
                        @Html.LabelFor(Model => Model.department, htmlAttributes: new { @class = "control-label" })
                        @Html.ValidationMessageFor(Model => Model.department, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-mg-3">
                        @Html.DropDownListFor(model => model.department, (List<SelectListItem>)ViewBag.CategoryListItems, "Select Department", new { @class = "form-control" })
                    </div>
                </div>
            </div>
        </div>
            <div class="col-lg-12">
                <span style="color:red">@ViewBag.Message</span>
                <span style="color:red">@TempData["msg"]</span>
                <span style="color:red">@TempData["mg"]</span>

            </div>
            <div class="col-lg-12">
                <div class="form-group">
                    <input type="submit" class="btn btn-primary" value="Submit" />
                </div>
            </div>
        }
    </div>
    <div>
        <table class="table table-striped">
            <tr>
                <th>EMPLOYEE ID</th>
                <th>EMPLOYEE NAME</th>
                <th>CONTACT NUMBER</th>
                <th>EMAIL ID</th>
                <th>ADDRESS</th>
                <th>CITY</th>
                <th>STATE</th>
                <th>PINCODE</th>
                <th>DESIGINATION</th>
                <th>DEPARTMENT</th>
                <th style="text-align:center">Edit</th>
                    <th style="text-align:center">Delete</th>
            </tr>

            @foreach (var item in ViewBag.emplist)
            {
                <tr>
                    <td>@item.emp_id</td>
                    <td>@item.emp_name</td>
                    <td>@item.contact_no</td>
                    <td>@item.email_id</td>
                    <td>@item.address</td>
                    <td>@item.city</td>
                    <td>@item.state</td>
                    <td>@item.pincode</td>
                    <td>@item.desigination</td>
                    <td>@item.department</td>
                    <td align="center">
                            <a href="@Url.Action("Addemp",new { item.id})" class="btn btn-success">Edit</a>

                        </td>
                        <td align="center">
                            <a href="@Url.Action("empdelete",new { item.id })" OnClick="return confirm('Are you sure? want to delete the data.');" class="btn btn-danger">Delete</a>
                        </td>
                </tr>
            }
        </table>
    </div>
</body>
</html>

<script>
    $('#state').change(function () {
        debugger
        $.ajax({
            url: "/admin/City_Bind",
            dataType: "json",
            async: false,
            data: {
                State: $(this).val()
            },
            success: function (City) {

                var s = "<option value=''>Select City</option>";
                for (var i = 0; i < City.length; i++) {
                    s += "<option value='" + City[i].Value + "'>" + City[i].Text + "</option>";
                }
                $('#city').html(s);
            },
            error: function (xopt, err) {
                alert("Some Error Occured");
                return false;
            }
        });
    });</script>